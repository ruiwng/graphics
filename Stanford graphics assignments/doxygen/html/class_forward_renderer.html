<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CS148 OpenGL 4 Assignments: ForwardRenderer Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CS148 OpenGL 4 Assignments
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="class_forward_renderer-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">ForwardRenderer Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>A multi-pass forward renderer with lights.  
 <a href="class_forward_renderer.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_forward_renderer_8h_source.html">ForwardRenderer.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for ForwardRenderer:</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_forward_renderer.png" usemap="#ForwardRenderer_map" alt=""/>
  <map id="ForwardRenderer_map" name="ForwardRenderer_map">
<area href="class_renderer.html" title="A generic rendering interface. " alt="Renderer" shape="rect" coords="0,0,113,24"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:af8ed84e45085c4dc60d565fcc3c198d1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_forward_renderer.html#af8ed84e45085c4dc60d565fcc3c198d1">ForwardRenderer</a> (std::shared_ptr&lt; class <a class="el" href="class_scene.html">Scene</a> &gt; inputScene, std::shared_ptr&lt; class <a class="el" href="class_camera.html">Camera</a> &gt; inputCamera)</td></tr>
<tr class="memdesc:af8ed84e45085c4dc60d565fcc3c198d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stores the input scene and the input camera for use for rendering.  <a href="#af8ed84e45085c4dc60d565fcc3c198d1">More...</a><br /></td></tr>
<tr class="separator:af8ed84e45085c4dc60d565fcc3c198d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab27ea6139730631d79488cec3c564597"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_forward_renderer.html#ab27ea6139730631d79488cec3c564597">~ForwardRenderer</a> ()</td></tr>
<tr class="memdesc:ab27ea6139730631d79488cec3c564597"><td class="mdescLeft">&#160;</td><td class="mdescRight">Just a day in the life of a destructor.  <a href="#ab27ea6139730631d79488cec3c564597">More...</a><br /></td></tr>
<tr class="separator:ab27ea6139730631d79488cec3c564597"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5cbca647822780d6cfbd39552d73ee06"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_forward_renderer.html#a5cbca647822780d6cfbd39552d73ee06">Initialize</a> () override</td></tr>
<tr class="memdesc:a5cbca647822780d6cfbd39552d73ee06"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loads the data that the forward renderer needs.  <a href="#a5cbca647822780d6cfbd39552d73ee06">More...</a><br /></td></tr>
<tr class="separator:a5cbca647822780d6cfbd39552d73ee06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a5deafa5deaf1e0abaab0e2074928c1"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_forward_renderer.html#a1a5deafa5deaf1e0abaab0e2074928c1">Render</a> () override</td></tr>
<tr class="memdesc:a1a5deafa5deaf1e0abaab0e2074928c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Renders a frame using a multi-pass forward renderer with all the lights in the scene.  <a href="#a1a5deafa5deaf1e0abaab0e2074928c1">More...</a><br /></td></tr>
<tr class="separator:a1a5deafa5deaf1e0abaab0e2074928c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_class_renderer"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_class_renderer')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="class_renderer.html">Renderer</a></td></tr>
<tr class="memitem:adc8ce31cd649bdf220ca8355809b1d06 inherit pub_methods_class_renderer"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_renderer.html#adc8ce31cd649bdf220ca8355809b1d06">Renderer</a> (std::shared_ptr&lt; class <a class="el" href="class_scene.html">Scene</a> &gt; inputScene, std::shared_ptr&lt; class <a class="el" href="class_camera.html">Camera</a> &gt; inputCamera)</td></tr>
<tr class="memdesc:adc8ce31cd649bdf220ca8355809b1d06 inherit pub_methods_class_renderer"><td class="mdescLeft">&#160;</td><td class="mdescRight">The <a class="el" href="class_renderer.html" title="A generic rendering interface. ">Renderer</a> constructor takes in a scene to be rendered and the camera from which to render the scene.  <a href="class_renderer.html#adc8ce31cd649bdf220ca8355809b1d06">More...</a><br /></td></tr>
<tr class="separator:adc8ce31cd649bdf220ca8355809b1d06 inherit pub_methods_class_renderer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afeee408862d5bd6255a6882d47e6d5cd inherit pub_methods_class_renderer"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_renderer.html#afeee408862d5bd6255a6882d47e6d5cd">~Renderer</a> ()</td></tr>
<tr class="memdesc:afeee408862d5bd6255a6882d47e6d5cd inherit pub_methods_class_renderer"><td class="mdescLeft">&#160;</td><td class="mdescRight">A virtual destructor to allow for safe inheritance.  <a href="class_renderer.html#afeee408862d5bd6255a6882d47e6d5cd">More...</a><br /></td></tr>
<tr class="separator:afeee408862d5bd6255a6882d47e6d5cd inherit pub_methods_class_renderer"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pro_attribs_class_renderer"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_class_renderer')"><img src="closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="class_renderer.html">Renderer</a></td></tr>
<tr class="memitem:a65178695d48824d3afd6fe40fd4915b6 inherit pro_attribs_class_renderer"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; class <a class="el" href="class_scene.html">Scene</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_renderer.html#a65178695d48824d3afd6fe40fd4915b6">scene</a></td></tr>
<tr class="memdesc:a65178695d48824d3afd6fe40fd4915b6 inherit pro_attribs_class_renderer"><td class="mdescLeft">&#160;</td><td class="mdescRight">Shared pointer to the scene. Should not be a null pointer when you go to render.  <a href="class_renderer.html#a65178695d48824d3afd6fe40fd4915b6">More...</a><br /></td></tr>
<tr class="separator:a65178695d48824d3afd6fe40fd4915b6 inherit pro_attribs_class_renderer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a08c6489c1ffe8e346b9f205b4014ca inherit pro_attribs_class_renderer"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; class <a class="el" href="class_camera.html">Camera</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_renderer.html#a7a08c6489c1ffe8e346b9f205b4014ca">camera</a></td></tr>
<tr class="memdesc:a7a08c6489c1ffe8e346b9f205b4014ca inherit pro_attribs_class_renderer"><td class="mdescLeft">&#160;</td><td class="mdescRight">Shared pointer to the camera. Should not be a null pointer when you go to render.  <a href="class_renderer.html#a7a08c6489c1ffe8e346b9f205b4014ca">More...</a><br /></td></tr>
<tr class="separator:a7a08c6489c1ffe8e346b9f205b4014ca inherit pro_attribs_class_renderer"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A multi-pass forward renderer with lights. </p>
<p>More details about what a multi-pass forward renderer is can be found in the documentation for the <a class="el" href="class_forward_renderer.html#a1a5deafa5deaf1e0abaab0e2074928c1" title="Renders a frame using a multi-pass forward renderer with all the lights in the scene. ">Render()</a> function. Do note that this class will not support transparent objects out of the box! You will have to find a way to handle them if you want to display transparent objects properly. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="af8ed84e45085c4dc60d565fcc3c198d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8ed84e45085c4dc60d565fcc3c198d1">&sect;&nbsp;</a></span>ForwardRenderer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ForwardRenderer::ForwardRenderer </td>
          <td>(</td>
          <td class="paramtype">std::shared_ptr&lt; class <a class="el" href="class_scene.html">Scene</a> &gt;&#160;</td>
          <td class="paramname"><em>inputScene</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::shared_ptr&lt; class <a class="el" href="class_camera.html">Camera</a> &gt;&#160;</td>
          <td class="paramname"><em>inputCamera</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stores the input scene and the input camera for use for rendering. </p>
<p>Calls the base class constructor, <a class="el" href="class_renderer.html#adc8ce31cd649bdf220ca8355809b1d06" title="The Renderer constructor takes in a scene to be rendered and the camera from which to render the scen...">Renderer::Renderer()</a>. </p>

</div>
</div>
<a id="ab27ea6139730631d79488cec3c564597"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab27ea6139730631d79488cec3c564597">&sect;&nbsp;</a></span>~ForwardRenderer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ForwardRenderer::~ForwardRenderer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Just a day in the life of a destructor. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a5cbca647822780d6cfbd39552d73ee06"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5cbca647822780d6cfbd39552d73ee06">&sect;&nbsp;</a></span>Initialize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ForwardRenderer::Initialize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Loads the data that the forward renderer needs. </p>
<p>Loads the depth prepass shader. See the documentation of <a class="el" href="class_forward_renderer.html#a1a5deafa5deaf1e0abaab0e2074928c1" title="Renders a frame using a multi-pass forward renderer with all the lights in the scene. ">Render()</a> for why it is necessary. </p>

<p>Implements <a class="el" href="class_renderer.html#a7cb221f355f181d84d66e8c09f50f04a">Renderer</a>.</p>

</div>
</div>
<a id="a1a5deafa5deaf1e0abaab0e2074928c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a5deafa5deaf1e0abaab0e2074928c1">&sect;&nbsp;</a></span>Render()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ForwardRenderer::Render </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Renders a frame using a multi-pass forward renderer with all the lights in the scene. </p>
<p>Note that in the multi-pass forward renderer, there is no limit to how many lights you may use; however, once the number of lights becomes too high, you will start to see a significant drop in frames per second. In our implementation of the multi-pass forward renderer, assuming that there are <img class="formulaInl" alt="$N$" src="form_1.png"/> lights, the renderer will perform <img class="formulaInl" alt="$ N + 2 $" src="form_2.png"/> passes through every object in the scene. For every draw call, the multi-pass forward renderer will perform additive blending of both the RGB and alpha channels to compute the new color in the color buffer. The render pass stages are as follows:</p>
<ol type="1">
<li>The depth preprocess stage. Without this stage, some objects will transparent even if they are not actually. Let's say a relative large and complex object has parts that are facing towards the camera but are occluded. Then let's say that the light vertex/fragment shader processes that part first and then processes the occluder parts later. With additive blending turned on, the colors will be mixed! Turning additive blending is not an option for a multi-pass forward renderer. Instead what we want to do is to perform an initial "depth preprocess" pass through every object in the scene. By doing this, we write the final depth of an object to the depth buffer. In the subsequent render passes, we will only write to the color buffer is the depth value is less than or equal to the value already stored in the depth buffer. Since we ran the depth preprocess pass on EVERY object in the scene, we are guaranteed that the value stored in the depth buffer is the smallest possible value for that pixel. So if a render pass passes the depth buffer check, it can know for sure that it is safe to write to the color buffer and that there won't be another object occluding it. It is important to note that depth is stored as a floating point value and with floating point values comes numerical imprecision which can result in <a href="https://en.wikipedia.org/wiki/Z-fighting">z-fighting</a>. As a result, we use <a href="https://www.opengl.org/sdk/docs/man/html/glPolygonOffset.xhtml">glPolygonOffset</a> to offset the depth values ever so slightly to prevent z-fighting from occurring. The amount that we offset ~should~ not be enough to cause problems with fragments passing the depth buffer test that otherwise should not.</li>
<li>The "global lighting" phase. This phase takes care of the ambient color of the material (Note: it might make more sense for the ambient color be a property of the light and not the material). Regardless, this phase will take care of the color that should only be added to the object once regardless of how many lights shine upon it. Good examples of things that would go in this stage are the ambient and emissive colors.</li>
<li>Finally, the rest of the lighting passes are dedicated to performing a normal render pass with a light in the scene. The rendering object in question is queried for the correct shader to use, the shader is then setup by the rendering object and the scene object, and finally the object is rendered and the resulting fragment colors are correctly blended into the color buffer.</li>
</ol>
<p>Still confused? Ask on Piazza! </p>

<p>Implements <a class="el" href="class_renderer.html#a38623da22aa718cfa41e2514ebd269f5">Renderer</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/data/cs148/cs148opengl-instructor/source/common/Rendering/<a class="el" href="_forward_renderer_8h_source.html">ForwardRenderer.h</a></li>
<li>/data/cs148/cs148opengl-instructor/source/common/Rendering/<a class="el" href="_forward_renderer_8cpp.html">ForwardRenderer.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Sep 26 2016 14:39:44 for CS148 OpenGL 4 Assignments by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.12
</small></address>
</body>
</html>
